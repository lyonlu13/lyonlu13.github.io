(this["webpackJsonpordinary-note"]=this["webpackJsonpordinary-note"]||[]).push([[0],{41:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var o,r,i,a=n(1),c=n.n(a),l=n(11),s=n.n(l),u=(n(41),n(6)),d=n(3),p=n(4),f=n(2),h=function(t){return"\n  position:absolute;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n  background: ".concat(t.bgColor,";\n  z-index:0;\n")},b=p.a.div(o||(o=Object(d.a)(["\n   ","\n"])),h),g=p.a.div(r||(r=Object(d.a)(["\n ","\n  background-image:",";\n"])),h,(function(t){return"\n      linear-gradient(".concat(t.gridColor," 1px, transparent 0),\n      linear-gradient(90deg, ").concat(t.gridColor," 1px, transparent 0),\n      linear-gradient(").concat(t.gridColor," 2px, transparent 0),\n      linear-gradient(90deg, ").concat(t.gridColor," 2px, transparent 0)")})),y=p.a.div(i||(i=Object(d.a)(["\n","\n  background-image:",";\n  background-size: ",";\n"])),h,(function(t){return"linear-gradient(".concat(t.lineColor," ").concat(t.lineWidth,"px, transparent 0)")}),(function(t){return"".concat(t.space,"px ").concat(t.space,"px, ").concat(t.space,"px ").concat(t.space,"px")}));function x(t){var e=t.type,n=void 0===e?"blank":e,o=t.color,r=void 0===o?"white":o,i=t.offsetX,a=void 0===i?0:i,c=t.offsetY,l=void 0===c?0:c,s=t.option;switch(n){case"blank":default:return Object(f.jsx)(b,{bgColor:r,offsetX:a,offsetY:l,style:{backgroundPositionX:a,backgroundPositionY:l}});case"line":return Object(f.jsx)(y,{bgColor:r,offsetX:a,offsetY:l,space:(null===s||void 0===s?void 0:s.space)||30,lineWidth:(null===s||void 0===s?void 0:s.width)||1,lineColor:(null===s||void 0===s?void 0:s.lineColor)||"lightgray",style:{backgroundPositionX:a,backgroundPositionY:l}});case"grid":return Object(f.jsx)(g,{bgColor:r,offsetX:a,offsetY:l,gridColor:(null===s||void 0===s?void 0:s.gridColor)||"#e0e0e0",style:{backgroundPositionX:a,backgroundPositionY:l,backgroundSize:"".concat((null===s||void 0===s?void 0:s.size)||30,"px ").concat((null===s||void 0===s?void 0:s.size)||30,"px, \n          ").concat((null===s||void 0===s?void 0:s.size)||30,"px ").concat((null===s||void 0===s?void 0:s.size)||30,"px, \n          ").concat(((null===s||void 0===s?void 0:s.size)||30)*((null===s||void 0===s?void 0:s.groupSize)||5),"px ").concat(((null===s||void 0===s?void 0:s.size)||30)*((null===s||void 0===s?void 0:s.groupSize)||5),"px,\n           ").concat(((null===s||void 0===s?void 0:s.size)||30)*((null===s||void 0===s?void 0:s.groupSize)||5),"px ").concat(((null===s||void 0===s?void 0:s.size)||30)*((null===s||void 0===s?void 0:s.groupSize)||5),"px")}})}}n(45);var j=n(7),v=n(14),O=n(8),w=n(9),m=n(5),k=function(){function t(e,n){Object(w.a)(this,t),this.x=e,this.y=n}return Object(O.a)(t,[{key:"offset",value:function(t,e){this.x+=t,this.y+=e}}]),t}();var S=n(19),A=n.n(S),E=Object(O.a)((function t(e,n,o,r){Object(w.a)(this,t),this.typename=e,this.name=n,this.color=o,this.icon=r}));function I(t){t.type=t.info.typename,t.pure=function(){return{id:t.id,name:t.name,type:t.type,geometry:t.geometry,data:t.data}},t.setData=function(e){return t.data=A.a.cloneDeep(e),t},t.updateData=function(e){e&&"object"===typeof e&&e.keys.forEach((function(n){t.data[n]=e.key}))},t.setPos=function(e,n){return this.geometry.pos=new k(e,n),t},t.init=function(){return t.id=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}(5),t},t.dom=null,t.setDom=function(t){this.dom=t},t.getName=function(){return this.name||this.info.name}}var B=function(){function t(e,n,o,r){Object(w.a)(this,t),this.info=new E("text","\u6587\u5b57\u65b9\u584a","#00a2ff","text"),this.data={},this.id=e,this.name=n,this.geometry=o||{pos:new k(0,0)},this.data=r,I(this),Object(m.d)(this)}return Object(O.a)(t,[{key:"new",value:function(){return this.data.text="Hello World",this.data.fontsize=18,this}},{key:"value",value:function(){return{type:"string",value:this.data.text}}},{key:"setText",value:function(t){return this.data.text=t,this}},{key:"setFontSize",value:function(t){return this.data.fontsize=t,this}},{key:"paste",value:function(t){"text"===t.type&&this.setText(t.text)}}]),t}(),D=function(){function t(e,n,o,r){Object(w.a)(this,t),this.info=new E("image","\u5716\u7247\u65b9\u584a","#ffc400","image"),this.data={},this.id=e,this.name=n,this.geometry=o||{pos:new k(0,0)},this.data=r,I(this),Object(m.d)(this)}return Object(O.a)(t,[{key:"new",value:function(){return this.data.src="https://lyonlu13.github.io/Ordinary-Note/Logo.png",this.data.width=400,this}},{key:"value",value:function(){return{type:"image",value:this.data.src}}},{key:"setSrc",value:function(t){return this.data.src=t,this}},{key:"setWidth",value:function(t){return t>=100&&(this.data.width=t),this}},{key:"paste",value:function(t){var e=this;if("image"===t.type)if(t.file){var n=new FileReader;n.readAsDataURL(t.file),n.onload=function(){e.setSrc(n.result)},n.onerror=function(t){console.log("Error: ",t)}}else e.setSrc(t.url)}}]),t}(),F=function(){function t(e,n,o,r){Object(w.a)(this,t),this.info=new E("latex","LaTeX\u65b9\u584a","#00a808","image"),this.data={},this.id=e,this.name=n,this.geometry=o||{pos:new k(0,0)},this.data=r,I(this),Object(m.d)(this)}return Object(O.a)(t,[{key:"new",value:function(){return this.data.code="",this}},{key:"value",value:function(){return{type:"text",value:this.data.code}}},{key:"setCode",value:function(t){this.data.code=t}},{key:"paste",value:function(t){"text"===t.type&&this.setCode(t.text)}}]),t}(),C=function(){function t(e,n,o,r){Object(w.a)(this,t),this.info=new E("array","\u9663\u5217\u65b9\u584a","#5800fc","image"),this.data={},this.id=e,this.name=n,this.geometry=o||{pos:new k(0,0)},this.data=r,I(this),Object(m.d)(this)}return Object(O.a)(t,[{key:"new",value:function(){return this.data.array=[0,1,2,3,4,5],this}},{key:"value",value:function(){return{type:"array",value:this.data.array}}},{key:"setArray",value:function(t){this.data.array=t}},{key:"setElement",value:function(t,e){void 0!==this.data.array[t]&&(this.data.array[t]=e)}},{key:"paste",value:function(t){if("text"===t.type)try{var e=JSON.parse(t.text);this.setArray(Array.isArray(e)?e:e.keys.map((function(t){return e[t]})))}catch(n){}}}]),t}(),z=function(){function t(e,n,o,r){Object(w.a)(this,t),this.info=new E("music","\u97f3\u6a02\u65b9\u584a","#FC0000","music"),this.data={},this.id=e,this.name=n,this.geometry=o||{pos:new k(0,0)},this.data=r,I(this),Object(m.d)(this)}return Object(O.a)(t,[{key:"new",value:function(){return this.data.type="yt",this.data.source={url:"https://www.youtube.com/watch?v=BFtzfdMHjkk",preload:""},this}},{key:"value",value:function(){return{type:"url",value:this.data.source}}},{key:"setType",value:function(t){this.data.type=t}},{key:"setSource",value:function(t){this.data.source=t}},{key:"paste",value:function(t){t.type}}]),t}();z.createByYt=function(t,e){return(new z).init().setData({type:"yt",source:{url:t}}).setPos(e.x,e.y)},z.createByUrl=function(t,e){return(new z).init().setData({type:"url",source:{url:t}})};var P=function(){function t(){var e=this;Object(w.a)(this,t);var n=localStorage.getItem("ids"),o=localStorage.getItem("blocks");if(n&&o){this.ids=JSON.parse(n),this.blocks={},JSON.parse(o).forEach((function(t){var n=function(t){var e=R[t.type];return e?new e(t.id,t.name,t.geometry,t.data):null}(t);n&&(e.blocks[t.id]=n)}))}else{this.blocks={};var r=new D("_","Logo",{pos:new k(0,0)},{}).init().new();r.setSrc("https://lyonlu13.github.io/Ordinary-Note/Logo.png"),r.setWidth(400);var i=new B("_","\u6b61\u8fce\u6587\u5b57",{pos:new k(0,160)},{}).init().new();i.setText("\u6b61\u8fce\u4f7f\u7528\u5e73\u51e1\u7b46\u8a18").setFontSize(45);var a=new B("_","\u8aaa\u660e\u6587\u5b57",{pos:new k(0,220)},{}).init().new();a.setText("\u5617\u8a66\u770b\u770b\u5404\u7a2e\u4e0d\u540c\u7684\u65b9\u584a\u5427!\nBy the way~ \u6211\u662f\u6587\u5b57\u65b9\u584a").setFontSize(20);var c=new D("_","Image1",{pos:new k(0,330)},{}).init().new();c.setSrc("data:image/jpeg;base64,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"),c.setWidth(150);var l=new D("_","Image2",{pos:new k(150,330)},{}).init().new();l.setSrc("https://megapx-assets.dcard.tw/images/75c77574-1d24-4ee9-bfef-ccc891a9cb2e/full.jpeg").setWidth(150);var s=new F("_","LaTeX",{pos:new k(0,500)},{}).init().new();s.setCode("\\binom{n}{k} = \\frac{n!}{k!(n-k)!}");var u=z.createByYt("https://www.youtube.com/watch?v=NPBCbTZWnq0",new k(350,350));this.blocks[r.id]=r,this.blocks[i.id]=i,this.blocks[a.id]=a,this.blocks[c.id]=c,this.blocks[l.id]=l,this.blocks[s.id]=s,this.blocks[u.id]=u,this.ids=[r.id,i.id,a.id,c.id,s.id,l.id,u.id]}setInterval((function(){P.getInstance().save()}),5e3),Object(m.d)(this)}return Object(O.a)(t,[{key:"get",value:function(t){return this.blocks[t]}},{key:"remove",value:function(t){var e=this;t.forEach((function(t){t.onDelete&&t.onDelete(),e.ids=e.ids.filter((function(e){return e!==t.id})),delete e.blocks[t.id]})),this.save()}},{key:"save",value:function(){var t=this;localStorage.setItem("ids",JSON.stringify(this.ids)),localStorage.setItem("blocks",JSON.stringify(this.ids.map((function(e){return t.blocks[e].pure()}))))}},{key:"sendToFront",value:function(t){this.ids=[].concat(Object(v.a)(this.ids.filter((function(e){return e!==t}))),[t])}},{key:"new",value:function(t){this.blocks[t.id]=t,this.ids.push(t.id),this.save()}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();var R={text:B,image:D,latex:F,array:C,music:z};var L,T,J,U,M,Y=n(34),W=n(10),N=n(30),Q=n.n(N),K={minWidth:210,minHeight:30,outline:"none",backgroundColor:"#FFFFFF3A",padding:10,whiteSpace:"nowrap"},G=p.a.div(L||(L=Object(d.a)(["\nposition: absolute;\ntop: 4px;\nleft: 4px;\ncolor:gray;\npadding:8px;\npointer-events: none;\n"]))),X=Object(j.a)((function(t){var e=t.model,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){n.current&&n.current.el.current.setAttribute("contenteditable","plaintext-only")}),[]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Q.a,{ref:n,onPaste:function(t){t.stopPropagation()},html:e.data.text,onChange:function(t){e.setText(t.target.value)},tagName:"div",style:Object(W.a)(Object(W.a)({},K),{},{fontSize:e.data.fontsize}),onKeyDown:function(t){t.stopPropagation()}}),""===e.data.text&&Object(f.jsx)(G,{children:"Text here..."})]})})),q=n(12),H=p.a.span(T||(T=Object(d.a)(["\n  background-color:",";\n  width:30px;\n  height:30px;\n  display:inline-flex;\n  justify-content:center;\n  align-items:center;\n  color: white;\n  position:absolute;\n  top:50%;\n  right:0;\n  transform: translate(50%,-50%);\n  border-radius:2px;\n  cursor:ew-resize;\n"])),(function(t){return t.bgcolor})),V=Object(j.a)((function(t){var e=t.draggingBlock,n=t.isSelected,o=t.selectedBlock,r=t.resizingBlock,i=t.model;return Object(f.jsxs)("div",{onMouseDown:function(){n&&(e(!0),1===o().length&&P.getInstance().sendToFront(i.id))},onDragOver:function(t){t.stopPropagation(),t.preventDefault()},onDrop:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files[0];if(e.type.indexOf("image")>-1){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){i.setSrc(n.result)},n.onerror=function(t){console.log("Error: ",t)}}},children:[Object(f.jsx)("img",{style:{display:"block"},alt:"",src:i.data.src,width:i.data.width,draggable:"false"}),Object(f.jsx)(H,{bgcolor:i.info.color,style:Z(n&&1===o().length),onMouseDown:function(t){t.stopPropagation(),r(!0)},children:Object(f.jsx)(q.a,{})})]})})),Z=function(t){return{opacity:t?1:0,pointerEvents:t?"auto":"none",transition:"0.3s"}},_=n(31),$=n(36),tt=Object(j.a)((function(t){var e=t.model,n=t.isSelected,o=t.selectedBlock,r=t.draggingBlock,i=Object(a.useRef)(null);return Object(f.jsxs)("div",{style:{minWidth:120,minHeight:40,padding:10,color:""===e.data.code?"gray":"black"},onMouseDown:function(){n&&(r(!0),1===o().length&&P.getInstance().sendToFront(e.id))},children:[Object(f.jsx)(_.BlockMath,{ref:i,math:e.data.code||"LaTeX..."}),n&&1===o().length&&Object(l.createPortal)(Object(f.jsx)($.a,{style:{outline:"none",padding:5,resize:"none",width:"100%",borderRadius:2,backgroundColor:"#f8f8f8",boxShadow:"0 0 2px 0.3px lightgray",border:"none"},onMouseDown:function(t){t.stopPropagation()},onKeyDown:function(t){t.stopPropagation()},value:e.data.code,onChange:function(t){return e.setCode(t.target.value)}}),document.getElementById("attributes"))]})})),et=p.a.div(J||(J=Object(d.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  border-radius: 2px;\n  background-color: #f8f8f8;\n  box-shadow: 0 0 1px 0.3px gray;\n  margin: 5px 2.5px;\n  & input {\n    outline: none;\n    width: 85px;\n    border: none;\n    background-color: transparent;\n  }\n"]))),nt=p.a.span(U||(U=Object(d.a)(["\n  background-color: ",";\n  display: flex;\n  align-items: center;\n  font-size: 12px;\n  padding: 2px;\n  border-radius: 2px;\n  color: white;\n  &:hover {\n    background-color: white;\n    color: ",";\n  }\n"])),(function(t){return t.bgcolor}),(function(t){return t.bgcolor})),ot=p.a.span(M||(M=Object(d.a)(["\n  position: absolute;\n  right: 0;\n  border-radius: 100px;\n  background-color: transparent;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  padding: 3px;\n  color: ",";\n  &:hover {\n    background-color: ",";\n    color: white;\n  }\n"])),(function(t){return t.bgcolor}),(function(t){return t.bgcolor})),rt=Object(j.a)((function(t){var e=t.model,n=t.isSelected;return Object(f.jsxs)("div",{style:{display:"flex",gap:5,padding:2},children:[e.data.array.map((function(t,o){return Object(f.jsx)(it,{value:t,onChange:function(t){e.setElement(o,t.target.value)},isSelected:n,model:e,deleteItem:function(){var t=Object(v.a)(e.data.array);t.splice(o,1),e.setArray(t)}},o)})),Object(f.jsx)(nt,{bgcolor:e.info.color,style:Object(W.a)({},lt(n,!0)),onClick:function(){e.setArray([].concat(Object(v.a)(e.data.array),[""]))},children:Object(f.jsx)(q.d,{})})]})}));function it(t){var e=t.value,n=t.onChange,o=t.isSelected,r=t.model,i=t.deleteItem;return Object(f.jsxs)("span",{children:[Object(f.jsxs)(et,{children:[Object(f.jsx)("input",{type:"text",value:e,onKeyDown:function(t){t.stopPropagation()},onChange:n,style:{textAlign:isNaN(e)||""===e?"left":"center"}}),Object(f.jsx)(ot,{bgcolor:r.info.color,style:Object(W.a)({flexGrow:1},lt(o)),onClick:function(){i()},children:Object(f.jsx)(q.e,{})})]}),Object(f.jsx)("div",{style:Object(W.a)({flexGrow:1,textAlign:"center",fontSize:12},lt(o)),children:Object(f.jsx)(q.b,{color:r.info.color})})]})}var at,ct,lt=function(t,e){return{opacity:t?1:0,pointerEvents:t?"auto":"none",transition:"0.3s",height:t||e?null:0,width:t||e?null:0,overflow:"hidden"}},st=n(16),ut=n(13),dt=n.n(ut),pt=n(33),ft=n(32),ht=n.n(ft),bt=n(24);function gt(t){t=Math.floor(t);var e=Math.floor(t/60);if(t%=60,e>=60){var n=Math.floor(e/60);return e%=60,"".concat(yt(n),":").concat(yt(e),":").concat(yt(t))}return"".concat(yt(e),":").concat(yt(t))}function yt(t){return"".concat(t>=10?t:"0"+t)}var xt=["title","titleId"];function jt(){return jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},jt.apply(this,arguments)}function vt(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ot(t,e){var n=t.title,o=t.titleId,r=vt(t,xt);return a.createElement("svg",jt({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,at||(at=a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),ct||(ct=a.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})))}var wt,mt=a.forwardRef(Ot),kt=(n.p,["title","titleId"]);function St(){return St=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},St.apply(this,arguments)}function At(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Et(t,e){var n=t.title,o=t.titleId,r=At(t,kt);return a.createElement("svg",St({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,wt||(wt=a.createElement("g",null,a.createElement("title",null,"Layer 1"),a.createElement("path",{transform:"rotate(-90 12.8096 17.2039)",stroke:"null",id:"svg_8",d:"m9.40553,21.56172l3.40403,4.30457l3.40403,-4.30457l-1.70202,0l0,-13.02018l-3.40403,0l0,13.02018l-1.70202,0z"}),a.createElement("rect",{transform:"rotate(-90 18.2639 7.44686)",stroke:"null",rx:.5,id:"svg_11",height:4.0695,width:7.86465,y:5.4121,x:14.33164}),a.createElement("rect",{transform:"rotate(-90 12.1934 7.44685)",stroke:"null",rx:.5,id:"svg_14",height:4.0695,width:7.86465,y:5.4121,x:8.26106}),a.createElement("rect",{transform:"rotate(-90 6.19705 7.44685)",stroke:"null",rx:.5,id:"svg_17",height:4.0695,width:7.86465,y:5.4121,x:2.26473}))))}var It,Bt=a.forwardRef(Et),Dt=(n.p,["title","titleId"]);function Ft(){return Ft=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ft.apply(this,arguments)}function Ct(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zt(t,e){var n=t.title,o=t.titleId,r=Ct(t,Dt);return a.createElement("svg",Ft({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,It||(It=a.createElement("g",null,a.createElement("title",null,"Layer 1"),a.createElement("path",{stroke:"null",id:"svg_8",d:"m14.4986,16.61824l3.40403,4.30457l3.40403,-4.30457l-1.70202,0l0,-13.02018l-3.40403,0l0,13.02018l-1.70202,0z"}),a.createElement("rect",{stroke:"null",rx:.5,id:"svg_11",height:4.0695,width:7.86465,y:15.35855,x:3.95245}),a.createElement("rect",{stroke:"null",rx:.5,id:"svg_14",height:4.0695,width:7.86465,y:9.28797,x:3.95245}),a.createElement("rect",{stroke:"null",rx:.5,id:"svg_16",height:4.0695,width:7.86465,y:3.34522,x:3.95245}),a.createElement("rect",{stroke:"null",rx:.5,id:"svg_17",height:4.0695,width:7.86465,y:3.34522,x:3.95245}))))}var Pt,Rt,Lt=a.forwardRef(zt),Tt=(n.p,["title","titleId"]);function Jt(){return Jt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Jt.apply(this,arguments)}function Ut(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mt(t,e){var n=t.title,o=t.titleId,r=Ut(t,Tt);return a.createElement("svg",Jt({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,Pt||(Pt=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),Rt||(Rt=a.createElement("path",{d:"M19 9l1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"})))}var Yt,Wt,Nt=a.forwardRef(Mt),Qt=(n.p,["title","titleId"]);function Kt(){return Kt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Kt.apply(this,arguments)}function Gt(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xt(t,e){var n=t.title,o=t.titleId,r=Gt(t,Qt);return a.createElement("svg",Kt({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,Yt||(Yt=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),Wt||(Wt=a.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})))}var qt,Ht,Vt=a.forwardRef(Xt),Zt=(n.p,["title","titleId"]);function _t(){return _t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},_t.apply(this,arguments)}function $t(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function te(t,e){var n=t.title,o=t.titleId,r=$t(t,Zt);return a.createElement("svg",_t({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,qt||(qt=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),Ht||(Ht=a.createElement("path",{d:"M8 5v14l11-7z"})))}var ee,ne,oe=a.forwardRef(te),re=(n.p,["title","titleId"]);function ie(){return ie=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ie.apply(this,arguments)}function ae(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ce(t,e){var n=t.title,o=t.titleId,r=ae(t,re);return a.createElement("svg",ie({xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"#000000",ref:e,"aria-labelledby":o},r),n?a.createElement("title",{id:o},n):null,ee||(ee=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),ne||(ne=a.createElement("path",{d:"M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"})))}var le,se,ue,de,pe,fe,he,be=a.forwardRef(ce),ge=(n.p,{add:mt,align_h:Bt,align_v:Lt,awesome:Nt,pause:Vt,play:oe,repeat:be});function ye(t){var e=t.icon,n=t.color,o=t.size,r=t.style,i=t.onClick,a=ge[e];return a?Object(f.jsx)(a,{style:Object(W.a)({fill:n,width:o,height:o},r),onClick:i}):""}var xe,je,ve,Oe,we=p.a.div(le||(le=Object(d.a)(["\n  border-radius:1000px 0 0 1000px;\n  position: relative;\n  width:130px;\n  height:100px;\n  background-position: center !important;\n  flex-shrink: 0;\n"]))),me=p.a.div(se||(se=Object(d.a)(["\n  width: calc(100% - 130px);\n  flex-grow: 1;\n  padding:10px;\n  background-color:white;\n"]))),ke=p.a.div(ue||(ue=Object(d.a)(["\n  overflow: hidden;\n  width:100%;\n  height:5px;\n  background-color:#ffeded;\n  border-radius: 1000px;;\n"]))),Se=p.a.div(de||(de=Object(d.a)(["\n  display: flex;\n  justify-content: space-between;\n  & span{\n    font-size: 12px;\n  }\n"]))),Ae=p.a.div(pe||(pe=Object(d.a)(["\n  display: flex;\n  justify-content: space-around;\n  padding:5px;\n"]))),Ee=p.a.div(fe||(fe=Object(d.a)(["\n  position: relative;\n  width:30px;\n  height:30px;\n  padding:0;\n  & svg{\n    position: absolute;\n    transition:0.3s;\n    top:50%;\n    left:50%;\n    transform:translate(-50%,-50%);\n  }\n"]))),Ie=p.a.div(he||(he=Object(d.a)(["\n  width:30px;\n"]))),Be=Object(j.a)((function(t){var e=t.model,n=t.isSelected,o=t.selectedBlock,r=t.draggingBlock,i=Object(a.useState)(!0),c=Object(u.a)(i,2),l=c[0],s=c[1],d=Object(a.useState)(0),p=Object(u.a)(d,2),h=p[0],b=p[1],g=Object(a.useState)(0),y=Object(u.a)(g,2),x=y[0],j=y[1],v=Object(a.useState)(!1),O=Object(u.a)(v,2),w=O[0],m=O[1],k=Object(a.useState)(!1),S=Object(u.a)(k,2),A=S[0],E=S[1];return Object(a.useEffect)((function(){function t(t,n){e.howl=new bt.Howl({src:[t],html5:!0,onload:function(){b(e.howl.duration()),s(!1)},onplay:function(){m(!0)},onpause:function(){m(!1)},onloaderror:function(t,e){t&&(console.log(t,e),n())},onend:function(){e.howl.loop()||m(!1)},preload:"metadata"}),e.howl.play(),e.onDelete=function(){e.howl&&e.howl.stop()}}function n(){return(n=Object(st.a)(dt.a.mark((function n(){var o;return dt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:bt.Howler.autoUnlock=!0,o=e.data.source.url,"yt"===e.data.type?t(e.data.source.preload,(function(){fetch("https://7rs07iiiz2.execute-api.ap-northeast-1.amazonaws.com/default/yt-dl?url=".concat(o,"&audio=true")).then((function(t){return t.json()})).then((function(n){e.setSource({url:o,preload:n.formats[0].url,thumbnail:n.videoDetails.thumbnails[2].url,title:n.videoDetails.title}),t(n.formats[2].url)}))})):"url"===e.data.type&&t(o);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}e.howl||function(){n.apply(this,arguments)}()}),[e]),Object(a.useEffect)((function(){var t=setInterval((function(){e.howl&&j(e.howl.seek())}),500);return function(){clearInterval(t)}}),[e.howl]),Object(a.useEffect)((function(){e.howl&&(e.howl.onplay=function(){m(!0)},e.howl.onpause=function(){m(!1)})}),[e.howl,w]),Object(f.jsxs)("div",{style:{display:"flex",width:400,height:100,filter:"drop-shadow(0 0 2px #575757)"},children:[Object(f.jsx)(we,{onMouseDown:function(){n&&(r(!0),1===o().length&&P.getInstance().sendToFront(e.id))},style:{filter:"brightness(".concat(l?.7:1,")"),background:e.data.source.thumbnail?"url(".concat(e.data.source.thumbnail,")"):"yt"===e.data.type?"gray":e.info.color},children:"yt"===e.data.type?Object(f.jsx)(De,{show:l?1:0}):Object(f.jsx)(Fe,{rotate:w})}),Object(f.jsxs)(me,{children:[Object(f.jsxs)(ht.a,{gradientWidth:10,children:[l?"\u8f09\u5165\u97f3\u6a02\u4e2d":"yt"===e.data.type?e.data.source.title:e.data.source.url,Object(f.jsx)(Ie,{})]}),Object(f.jsxs)(Se,{children:[Object(f.jsx)("span",{children:l?"00:00":gt(x)}),Object(f.jsx)("span",{children:l?"--:--":gt(h)})]}),Object(f.jsx)(ke,{children:Object(f.jsx)("div",{style:{height:10,width:l?"0":x/h*100+"%",backgroundColor:e.info.color}})}),Object(f.jsxs)(Ae,{children:[Object(f.jsxs)(Ee,{onClick:function(){e.howl&&(e.howl.playing()?e.howl.pause():e.howl.play())},style:{opacity:l?.5:1,cursor:l?"auto":"pointer",pointerEvents:l?"none":"auto"},children:[Object(f.jsx)(ye,{icon:"play",color:e.info.color,size:30,style:{opacity:w?0:1}}),Object(f.jsx)(ye,{icon:"pause",color:e.info.color,size:30,style:{opacity:w?1:0}})]}),Object(f.jsx)(Ee,{style:{opacity:A?1:.3,cursor:l?"auto":"pointer"},children:Object(f.jsx)(ye,{icon:"repeat",onClick:function(){e.howl&&(e.howl.loop()?e.howl.loop(!1):e.howl.loop(!0),E(e.howl.loop()))},color:e.info.color,size:25})})]})]})]})}));function De(t){var e=t.show;return Object(f.jsxs)("div",{className:"spinner",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",opacity:e,transition:"0.5s"},children:[Object(f.jsx)("div",{className:"double-bounce1"}),Object(f.jsx)("div",{className:"double-bounce2"})]})}function Fe(t){var e=t.rotate;return Object(f.jsx)("span",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(f.jsx)(pt.a,{style:{animation:"spin 4s linear infinite",animationPlayState:e?"":"paused",transition:"0.3s"},size:50,color:e?"white":"#ddd"})})}var Ce,ze,Pe,Re,Le,Te,Je,Ue=P.getInstance(),Me={text:X,image:V,latex:tt,array:rt,music:Be},Ye=Object(j.a)((function(t){var e,n=t.offsetX,o=t.offsetY,r=t.zoom,i=t.id,c=t.selectedBlock,l=t.draggingBlock,s=t.resizingBlock,u=Ue.get(i),d=!!c().find((function(t){return t.id===i})),p=l()&&d,h=Object(a.useRef)(null),b=Object(a.useRef)(!1);return Object(a.useEffect)((function(){!b.current&&u&&(u.setDom(h.current),b.current=!0)}),[u]),u?Object(f.jsxs)(Ne,{ref:h,x:20,y:20,offsetX:n,offsetY:o,zoom:r,color:u.color,style:{top:u.geometry.pos.y*r+o,left:u.geometry.pos.x*r+n,transform:"scale(".concat(100*r,"%)"),filter:p?"drop-shadow(12px 12px 1px rgba(0, 0, 0, 0.1))":""},onMouseUp:function(t){p||(t.shiftKey?c([].concat(Object(v.a)(c()),[u])):c([u]))},children:[Object(f.jsx)(Ke,{color:u.info.color,onMouseDown:function(){1===c().length&&Ue.sendToFront(u.id),l(!0)},style:We(d&&!p,d&&p),children:u.name||u.info.name}),Object(f.jsx)(Qe,{color:u.info.color,style:{borderColor:d?"":"#ffffff00"},children:(e=Me[u.type],Object(f.jsx)(e,{model:u,draggingBlock:l,isSelected:d,selectedBlock:c,resizingBlock:s}))}),Object(f.jsxs)(Ge,{style:We(d&&!p),children:[Object(f.jsx)(Y.a,{style:{verticalAlign:"middle"}}),i]})]}):null})),We=function(t,e){return{opacity:t?1:0,pointerEvents:t||e?"auto":"none",transition:"0.3s"}},Ne=p.a.div(xe||(xe=Object(d.a)(["\n  position:absolute;\n  z-index:2;\n  transform-origin: top left;\n"]))),Qe=p.a.div(je||(je=Object(d.a)(["\n  z-index:2;\n  border: ",";\n  transform-origin: top left;\n  transition:0.3s;\n"])),(function(t){return"2px solid ".concat(t.color)})),Ke=p.a.div(ve||(ve=Object(d.a)(["\n  position:absolute;\n  display: inline-block;\n  background-color: ",";\n  color: white;\n  padding :0 10px;\n  transform: translateY(-100%);\n  cursor: move;\n  user-select: none;\n  transition:0.3s;\n  z-index:5;\n"])),(function(t){return t.color})),Ge=p.a.div(Oe||(Oe=Object(d.a)(["\n  position:absolute;\n  display: inline-flex;\n  background-color: #a3a3a3;\n  color: white;\n  padding :0 5px;\n  bottom: 0;\n  right:0;\n  transform: translateY(100%);\n  align-items: center;\n  transition:0.3s;\n"]))),Xe=n(22),qe=n(35),He=P.getInstance();function Ve(){var t=Object(a.useState)(""),e=Object(u.a)(t,2),n=e[0],o=e[1],r=Object(a.useState)([]),i=Object(u.a)(r,2),c=i[0],l=i[1],s=Object(a.useRef)(!1);function d(){s.current=!0,"/"===n[0]?function(t){var e=t.split(" ");switch(e[0].replace("/","")){case"text":e.splice(0,1);var n=e.join(" ");He.new(new B(null,"",{pos:{x:0,y:0}},{text:n}).init());break;case"latex":e.splice(0,1);var o=e.join(" ")||"LaTeX";He.new(new F(null,"",{pos:{x:0,y:0}},{code:o}).init());break;case"array":e.splice(0,1);var r=e.join(" ")||"[]";try{var i=JSON.parse(r);He.new(new C("","",{pos:{x:0,y:0}},{array:Array.isArray(i)?i:i.keys.map((function(t){return i[t]}))}).init())}catch(c){console.log(c)}break;case"youtube":case"yt":e.splice(0,1);var a=e.join(" ");He.new(z.createByYt(a,new k(0,0)))}}(n):He.new(new B(null,"",{pos:{x:0,y:0}},{text:n}).init())}return Object(a.useEffect)((function(){var t=n.split(" ").map((function(t,e){return"/"===t[0]&&0===e?Object(f.jsx)(en,{children:t}):"$"===t[0]?He.ids.includes(t.replace("$",""))?Object(f.jsx)(nn,{children:t}):Object(f.jsx)(on,{children:t}):"*"===t?Object(f.jsx)(rn,{children:t}):t})),e=[];t.forEach((function(t){e.push(t),e.push(" ")})),l(e)}),[n]),Object(f.jsxs)(_e,{children:[Object(f.jsx)(tn,{spellCheck:"false",contentEditable:"plaintext-only",onKeyPress:function(t){"Enter"===t.key&&d()},onInput:function(t){s.current?(s.current=!1,t.target.innerHTML="",o("")):o(t.target.innerHTML)},onPaste:function(t){t.stopPropagation();var e=void 0;window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData&&(e=t.clipboardData.getData("text/plain")),e.match(/(\r\n|\n|\r)/gm,"")&&t.preventDefault()}}),Object(f.jsx)($e,{children:c})]})}var Ze,_e=p.a.div(Ce||(Ce=Object(d.a)(["\n            position: absolute;\n            z-index:3;\n            bottom:0;\n            width:100vw;\n            height:40px;\n            font-family:monospace;\n            "]))),$e=p.a.div(ze||(ze=Object(d.a)(["\n            position: absolute;\n            width:100%;\n            height:40px;\n            padding:10px;\n            background-color:#00000022;\n            font-size:18px;\n            top:0;\n            "]))),tn=p.a.div(Pe||(Pe=Object(d.a)(["\n            position: absolute;\n            padding:10px;\n            width:100%;\n            top:0;\n            font-size:18px;\n            outline: none;\n            border:none;\n            background-color: transparent;\n            color:transparent;\n            z-index:2;\n            caret-color:black;\n            "]))),en=p.a.span(Re||(Re=Object(d.a)(["\n            font-weight:bold;\n            color:#00A7F5;\n            "]))),nn=p.a.span(Le||(Le=Object(d.a)(["\n         background-color:#F5D000;\n        border-radius:2px;\n        color:white;\n            "]))),on=p.a.span(Te||(Te=Object(d.a)(["\ntext-decoration: wavy underline red;\n"]))),rn=p.a.span(Je||(Je=Object(d.a)(["\n        background-color:#0072F5;\n        border-radius:2px;\n        color:white;\n "])));function an(t){return cn.apply(this,arguments)}function cn(){return cn=Object(st.a)(dt.a.mark((function t(e){var n;return dt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=/(https?:\/\/[\w-\.]+(:\d+)?(\/[~\w\/\.]*)?(\?\S*)?(#\S*)?)/,t.abrupt("return",new Promise(function(){var t=Object(st.a)(dt.a.mark((function t(o,r){return dt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.match(n)||e.indexOf("data:")>-1)){t.next=16;break}if(!(e.indexOf("www.youtube.com")>-1)){t.next=3;break}return t.abrupt("return",o("yt"));case 3:return t.next=5,sn(e);case 5:if(!t.sent){t.next=8;break}return t.abrupt("return",o("audio"));case 8:return t.next=10,ln(e);case 10:if(!t.sent){t.next=13;break}return t.abrupt("return",o("image"));case 13:o("else"),t.next=17;break;case 16:o(null);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)}))),cn.apply(this,arguments)}function ln(t){var e,n=new Image;return new Promise((function(o,r){n.onerror=n.onabort=function(){n=null,clearTimeout(e),o(!1)},n.onload=function(){n=null,clearTimeout(e),o(!0)},n.src=t,e=setTimeout((function(){n=null,o(null)}),500)}))}function sn(t){var e,n=new Audio;return new Promise((function(o,r){n.onerror=n.onabort=function(){n=null,clearTimeout(e),o(!1)},n.oncanplay=function(){n=null,clearTimeout(e),o(!0)},n.src=t,n.load(),e=setTimeout((function(){n=null,o(null)}),500)}))}function un(t,e){return{case:function(n,o){return t===n||e?un(t,e||o):un(t)},else:function(t){return console.log(e),void 0!==e?(console.log("Got determine"),"function"===typeof e?e():e):"function"===typeof t?t():t}}}var dn,pn,fn=p.a.span(Ze||(Ze=Object(d.a)(["\n  display: inline-flex;\n  align-items:center;\n  justify-content:center;\n  width: 30px;\n  height:30px;\n  background-color:white;\n  border-radius:2px;\n  transition:0.3s;\n  & svg{\n    fill:",";\n    transition:0.3s;\n  }\n  &:hover{\n    background-color:",";\n    & svg{\n      fill:white;\n    }\n  }\n\n"])),(function(t){return t.color}),(function(t){return t.color}));function hn(t){var e=t.onClick,n=t.color,o=t.icon;return Object(f.jsx)(fn,{color:n,onClick:e,children:Object(f.jsx)(ye,{icon:o})})}var bn,gn,yn,xn=p.a.div(dn||(dn=Object(d.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n  display:flex;\n  justify-content:center;\n  align-items:center;\n  background:#00000022;\n  transition:0.3s;\n  z-index:10;\n"]))),jn=p.a.div(pn||(pn=Object(d.a)(["\n  background:#FFFFFF;\n  border-radius:10px;\n  width:400px;\n  height:80%;\n  overflow-y:auto;\n  padding:20px;\n"])));function vn(t){var e=t.isOpen,n=t.setOpen,o=t.children;return Object(l.createPortal)(Object(f.jsx)(xn,{style:{pointerEvents:e?"auto":"none",opacity:e?1:0},onClick:function(){return n(!1)},children:Object(f.jsx)(jn,{onClick:function(t){return t.stopPropagation()},children:o})}),document.getElementById("root"))}var On,wn,mn,kn,Sn,An,En,In=p.a.div(bn||(bn=Object(d.a)(["\n    position:fixed;\n    right:0;\n    bottom:40px;\n    display:flex;\n    gap:10px;\n    padding:20px;\n    z-index:8;\n"]))),Bn=p.a.span(gn||(gn=Object(d.a)(["\n    width:50px;\n    height:50px;\n    border-radius:100px;\n    background: white;\n    display:inline-flex;\n    justify-content:center;\n    align-items:center;\n    box-shadow:0px 0px 3px 1px gray;\n    filter: brightness(1);\n    transition:0.3s;\n    cursor:pointer;\n    &:hover:{\n     filter: brightness(.9);\n     background:red;\n    }\n"]))),Dn=p.a.span(yn||(yn=Object(d.a)(["\n    margin: 10px 0;\n    width:100%;\n    height:50px;\n    border-radius:10px;\n    background: white;\n    display:inline-flex;\n    justify-content:center;\n    align-items:center;\n    box-shadow:0px 0px 3px 1px gray;\n    filter: brightness(1);\n    transition:0.3s;\n    cursor:pointer;\n    &:hover:{\n     filter: brightness(0.8);\n    }\n"])));function Fn(){var t=Object(a.useState)(!1),e=Object(u.a)(t,2),n=e[0],o=e[1];return Object(f.jsxs)(In,{children:[Object(f.jsx)(Bn,{onClick:function(){return o(!0)},children:Object(f.jsx)(ye,{icon:"add",color:"#00AEFF"})}),Object(f.jsxs)(vn,{isOpen:n,setOpen:o,children:[Object(f.jsx)("h1",{style:{margin:0},children:"\u65b0\u589e\u65b9\u584a"}),Object(f.jsx)("hr",{style:{background:"gray"}}),Object.keys(R).map((function(t){return Object(f.jsx)(Dn,{onClick:function(){return e=R[t],P.getInstance().new(new e("_",(new e).info.name,{pos:new k(500,200)},{}).init().new()),void o(!1);var e},children:(new R[t]).info.name})}))]})]})}var Cn=p.a.div(On||(On=Object(d.a)(["\n  position:absolute;\n  top:0;\n  left:0;\n  width:100vw;\n  height:100vh;\n  z-index:1;\n"]))),zn=p.a.div(wn||(wn=Object(d.a)(["\nposition:absolute;\ntop:20px;\nright:20px;\ndisplay: flex;\nflex-direction: column;\ngap: 10px;\n"]))),Pn=p.a.h3(mn||(mn=Object(d.a)(["\n  margin:0;\n"]))),Rn=p.a.div(kn||(kn=Object(d.a)(["\n  width:240px;\n  padding:10px;\n  z-index:2;\n  background-color: white;\n  overflow: hidden;\n  border-radius: 2px;\n  box-shadow: 1px 1px 5px 1px gray;\n  transition: 0.3s;\n"]))),Ln=p.a.div(Sn||(Sn=Object(d.a)(["\n  display: flex;\n  align-items:center;\n  margin:5px 0;\n"]))),Tn=p.a.div(An||(An=Object(d.a)(["\n  gap: 2px;\n  display: inline-flex;\n  border-radius: 2px;\n  background-color: ",";\n  padding:2px 4px;\n  color: white;\n  align-items:center;\n  margin-right:10px;\n"])),(function(t){return t.bgColor})),Jn=p.a.div(En||(En=Object(d.a)(["\n  position: fixed;\n  width:100px;\n  height:100px;\n  border: 3px solid #4186b0;\n  background-color: #b0e1ff55;\n  z-index:4;\n"]))),Un=P.getInstance(),Mn=Object(j.a)((function(t){var e=t.offsetX,n=t.offsetY,o=t.zoom,r=t.ids,i=(t.zooming,t.selectedBlock),a=t.draggingBlock,c=t.resizingBlock;return Object(f.jsx)(f.Fragment,{children:r.map((function(t){return Object(f.jsx)(Ye,{offsetX:e,offsetY:n,zoom:o,id:t,selectedBlock:i,draggingBlock:a,resizingBlock:c},t)}))})}));window.urlCheck=an;var Yn=function(){var t=Object(a.useState)(0),e=Object(u.a)(t,2),n=e[0],o=e[1],r=Object(a.useState)(0),i=Object(u.a)(r,2),c=i[0],l=i[1],s=Object(a.useState)(20),d=Object(u.a)(s,2),p=d[0],h=d[1],b=Object(a.useState)(20),g=Object(u.a)(b,2),y=g[0],j=g[1],v=Object(a.useState)(1),O=Object(u.a)(v,2),w=O[0],m=O[1],S=Object(a.useState)(!1),E=Object(u.a)(S,2),I=E[0],F=E[1],C=Object(a.useState)(!1),P=Object(u.a)(C,2),R=P[0],L=P[1],T=Object(a.useState)([]),J=Object(u.a)(T,2),U=J[0],M=J[1],Y=Object(a.useState)(null),W=Object(u.a)(Y,2),N=W[0],Q=W[1],K=Object(a.useRef)({}),G=Object(a.useState)(!1),X=Object(u.a)(G,2),H=X[0],V=X[1],Z=Object(a.useRef)(null),_=Object(a.useState)(!1),$=Object(u.a)(_,2),tt=$[0],et=$[1],nt=Object(a.useRef)({x:0,y:0}),ot=Object(a.useRef)({x:0,y:0});function rt(t){return t&&U.length>0&&U.forEach((function(t){K.current[t.id]={x:t.dom.getBoundingClientRect().left-n,y:t.dom.getBoundingClientRect().top-c}})),void 0!==t&&V(t),t||H}function it(t){return t&&(Z.current={width:U[0].data.width,x:n}),void 0!==t&&et(t),t||tt}function at(t){(t=t||window.event).deltaY>0?w>.5&&m(w-.1):w<2&&m(w+.1)}function ct(t){console.log(t),1===U.length?U[0].paste(t):function(t){var e;switch(t.type){case"text":Un.new(new B(null,"\u65b0\u6587\u5b57\u65b9\u584a",{pos:{x:0,y:0}},{text:t.text}).init());break;case"image":Un.new(new D(null,(null===(e=t.file)||void 0===e?void 0:e.name)||"",{pos:{x:0,y:0}},{src:t.file?URL.createObjectURL(t.file):t.url,width:300}).init());break;case"audio":t.yt?Un.new(z.createByYt(t.yt,new k(0,0))):Un.new(z.createByUrl(t.url,new k(0,0)))}}(t)}return Object(a.useEffect)((function(){document.onpaste=function(t){var e=t.clipboardData||window.clipboardData,n=e.files[0];n?(n.type.startsWith("image/")&&ct({type:"image",file:n}),n.type.startsWith("audio/")&&ct({type:"audio",file:n})):e.items[0]&&e.items[0].getAsString((function(t){var e=t;try{var n=JSON.parse(t);e=n.url}catch(o){}an(e).then((function(t){t?un(t).case("image",(function(){return ct({type:"image",url:e})})).case("audio",(function(){return ct({type:"audio",url:e})})).case("yt",(function(){return ct({type:"audio",yt:e})})).else((function(){return ct({type:"text",text:e})})):ct({type:"text",text:e})}))}))},document.onmousemove=function(t){(o(t.clientX),l(t.clientY),H&&U.forEach((function(e){e.setPos((t.clientX+K.current[e.id].x-p)/w,(t.clientY+K.current[e.id].y-y)/w)})),tt)&&U[0].setWidth((t.clientX-Z.current.x)/w+Z.current.width)},document.onmouseup=function(){F(!1),rt(!1),it(!1);var t=[{x:Math.min(n,N.x),y:Math.min(c,N.y)},{x:Math.max(n,N.x),y:Math.max(c,N.y)}];M(Un.ids.filter((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[{x:0,y:0},{x:0,y:0}],e=(arguments.length>1?arguments[1]:void 0).getBoundingClientRect();return t[1].x>e.left&&e.right>t[0].x&&t[1].y>e.top&&e.bottom>t[0].y}(t,Un.blocks[e].dom)})).map((function(t){return Un.blocks[t]}))),Q(null)},document.onkeydown=function(t){"Delete"===t.key?U.length>=1&&Un.remove(U):" "===t.key&&L(!0)},document.onkeyup=function(t){" "===t.key&&L(!1)},document.onwheel=at}),[H,tt,U,w,N,n,c]),Object(f.jsxs)(f.Fragment,{children:[N&&Object(f.jsx)(Jn,{style:{top:Math.min(N.y,c),left:Math.min(N.x,n),width:Math.abs(n-N.x),height:Math.abs(c-N.y)}}),Object(f.jsx)(x,{type:"grid",offsetX:p,offsetY:y,option:{size:30*w,groupSize:20}}),Object(f.jsx)(Mn,{zooming:at,offsetX:p,offsetY:y,zoom:w,ids:Un.ids,selectedBlock:function(t){return void 0!==t&&M(t),t||U},draggingBlock:rt,resizingBlock:it}),Object(f.jsx)(Cn,{onMouseDown:function(t){R?(nt.current.x=p,nt.current.y=y,ot.current.x=t.clientX,ot.current.y=t.clientY,F(!0)):0===t.button&&Q({x:n,y:c})},onMouseMove:function(t){I&&window.requestAnimationFrame((function(){h(nt.current.x-(ot.current.x-t.clientX)),j(nt.current.y-(ot.current.y-t.clientY))}))},style:{cursor:I?"grabbing":R?"grab":"auto"}}),Object(f.jsxs)(zn,{children:[Object(f.jsxs)(Rn,{children:[Object(f.jsx)(Pn,{children:"\u8cc7\u8a0a"}),Object(f.jsxs)(Ln,{children:[Object(f.jsxs)(Tn,{bgColor:"#047BEB",children:[Object(f.jsx)(Xe.a,{})," Offset"]})," (",p,",",y,")"]}),Object(f.jsxs)(Ln,{children:[Object(f.jsxs)(Tn,{bgColor:"#F3C600",children:[Object(f.jsx)(q.c,{})," Mouse"]})," (",n,",",c,")"]}),Object(f.jsxs)(Ln,{children:[Object(f.jsxs)(Tn,{bgColor:"#006823",children:[Object(f.jsx)(qe.a,{})," Zoom"]}),Math.round(100*w),"%"]})]}),Object(f.jsxs)(Rn,{style:{opacity:0===U.length?0:1,pointerEvents:0===U.length?"none":"auto"},children:[Object(f.jsx)(Pn,{children:"\u5c6c\u6027"}),U.length>1&&Object(f.jsxs)("div",{children:["\u5df2\u9078\u64c7",U[0].getName(),"\u8207\u5176\u4ed6",U.length-1,"\u500b\u5143\u7d20"]}),Object(f.jsx)("div",{id:"attributes",style:{marginTop:10}})]}),Object(f.jsxs)(Rn,{style:{opacity:U.length<2?0:1,pointerEvents:U.length<2?"none":"auto"},children:[Object(f.jsx)(Pn,{children:"\u6392\u5217"}),Object(f.jsxs)("div",{style:{marginTop:10,display:"flex",gap:5},children:[Object(f.jsx)(hn,{icon:"align_v",color:"#003D83",onClick:function(){return function(t,e){var n=(t=A.a.sortBy(t,[function(t){return t.geometry.pos.y},function(t){return t.geometry.pos.x}]))[0].geometry.pos.x,o=t[0].geometry.pos.y;t.forEach((function(t){t.setPos(n,o),o+=t.dom.offsetHeight+e}))}(U,20)}}),Object(f.jsx)(hn,{icon:"align_h",color:"#003D83",onClick:function(){return function(t,e){var n=(t=A.a.sortBy(t,[function(t){return t.geometry.pos.x},function(t){return t.geometry.pos.y}]))[0].geometry.pos.y,o=t[0].geometry.pos.x;t.forEach((function(t){t.setPos(o,n),o+=t.dom.offsetWidth+e}))}(U,20)}})]})]})]}),Object(f.jsx)(Fn,{}),Object(f.jsx)(Ve,{})]})},Wn=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(e){var n=e.getCLS,o=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),o(t),r(t),i(t),a(t)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(Yn,{})}),document.getElementById("root")),Wn()}},[[52,1,2]]]);
//# sourceMappingURL=main.177cad0d.chunk.js.map